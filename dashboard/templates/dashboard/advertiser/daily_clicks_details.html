{% extends "layout.html" %}
{% from 'macros.html' import render_form, render_page_title, render_transaction_alert %}

{% block title %}
    {{ title | default_title }}
{% endblock %}

{% block css %}
    <!-- BEGIN PLUGIN CSS -->
    <link href="{{ url_for('static', filename='assets/plugins/font-awesome/css/font-awesome.css') }}" rel="stylesheet"
          type="text/css"/>
    <link href="{{ url_for('static', filename='assets/plugins/bootstrap-select2/select2.css') }}" rel="stylesheet"
          type="text/css" media="screen"/>
    <link href="{{ url_for('static', filename='assets/plugins/jquery-datatable/css/jquery.dataTables.css') }}"
          rel="stylesheet"
          type="text/css"/>
    <link href="{{ url_for('static', filename='assets/plugins/datatables-responsive/css/datatables.responsive.css') }}"
          rel="stylesheet"
          type="text/css" media="screen"/>
    <!-- END PLUGIN CSS -->
{% endblock %}

{% block content %}
    <ul class="breadcrumb">
        <li>
            <a href="{{ url_for('dashboard') }}" class="active">داشبورد</a>
        </li>
        <li>
            <a href="{{ url_for('advertiser_campaign') }}" class="active">کمپین های من</a>
        </li>
        <li>
            <a href="{{ url_for('advertiser_dashboard_statistics', campaign_id=configs.campaign_id) }}" class="active">آمار ماهیانه کمپین  {{ configs.campaign_name }}</a>
        </li>
        <li>
 جزئیات نمایش کمپین  {{ configs.campaign_name }} در تاریخ {{ configs.day | epoch_date_to_persian_date | enToPersianNumb }}
        </li>
    </ul>
    <div class="page-title"><i class="icon-custom-right"></i>
        <h3>{{ configs.action }}</h3>
    </div>

    {% if message %}
        {{ render_transaction_alert(message.type,message.message) }}
    {% endif %}

    <div class="row-fluid">
        <div class="span12">
            <div class="grid simple ">
                <div class="grid-title">
                    <div class="tools">
                        <a href="javascript:;" class="collapse"></a>
                        <a href="#grid-config" data-toggle="modal" class="config"></a>
                        <a href="javascript:;" class="reload"></a>
                        <a href="javascript:;" class="remove"></a>
                    </div>
                </div>
                <div class="grid-body ">
                    <table class="table table-striped table-condensed" id="example">
                        <thead>
                        <tr>
                            <th>#</th>
                            <th>مکان کاربر</th>
                            <th>شناسه کاربر</th>
                            <th>سیتم عامل و مرورگر کاربر</th>
                            <th class="defaultSort">زمان</th>
                            <th>لینک ارجاع</th>
                            <th>اندازه بنر/کلمه کلیدی</th>
                            <th>هزینه کلیک(ریال)</th>
                            <th>وضعیت کلیک</th>
                        </tr>
                        </thead>
                        <tbody>

                        {% for value in clicks %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td>{{ value["_source"]["UserLocation"] }}</td>
                                <td dir="ltr">{{ value["_source"]["IPAddress"] }}</td>
                                <td dir="ltr">{{ value["_source"]["UserOS"] }}</td>
                                <td dir="ltr">{{ value["_source"]["Time"] | date_add_space | gregorian_date_to_persian_date }}</td>
                                <td><a href="{{ value["_source"]["SiteURL"] }}" target="_blank">آدرس صفحه</a>
                                </td>
                                <td>{{ value["_source"]["QueryOrSize"] }}</td>
                                {% if value["_source"]["ClickStatus"] == "Real" %}
                                    <td>{{ value["_source"]["ClickCost"] }}</td>
                                {% else %}
                                    <td>0</td>
                                {% endif %}
                                {% if value["_source"]["ClickStatus"] == "Real" %}
                                    <td>واقعی</td>
                                {% else %}
                                    <td>غیر واقعی</td>
                                {% endif %}
                            </tr>
                        {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="{{ url_for('static', filename='assets/plugins/bootstrap-select2/select2.min.js') }}"
            type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/plugins/jquery-datatable/js/jquery.dataTables.min.js') }}"
            type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/plugins/jquery-datatable/extra/js/dataTables.tableTools.min.js') }}"
            type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/plugins/datatables-responsive/js/datatables.responsive.js') }}"
            type="text/javascript"></script>
    <script src="{{ url_for('static', filename='assets/plugins/datatables-responsive/js/lodash.min.js') }}"
            type="text/javascript"></script>
    <!-- END PAGE LEVEL JS INIT -->
    <script src="{{ url_for('static', filename='assets/js/datatables.js') }}"
            type="text/javascript"></script>
    <!-- END JAVASCRIPTS -->
{% endblock %}
